<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeedCash</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="back-button.css">
</head>
<body class="page">

    <div class="loader">
        <div class="bar"></div>
    </div>

    
    
   
    <div class="cv">
        <div class="glowing-box"></div>
        <div class="glowing-box1"></div>


        <img class="dorog" src="images/obl.jpg">
        <img class="dorog2" src="images/obl.jpg">



    </div>

    
  
   
    <div class="winner">
        <img  class="luck" src="images/speed_logo.svg">
        <img class="win" src="images/1win_logo.png">
    </div>

    <div class="back-button-container">
        <button class="back-button" onclick="window.location.href='../index.html'">Вернуться в меню</button>
    </div>

    <div class="rocket">
        <button id="startButton" class="button" onclick="generateRandomNumber()">GET SIGNAL</button>
        <p id="time" class="timer"></p>
        <p id="chance" class="ch"></p>
        <p id="timers" class="timerss"></p>
        <p class="ti">Won:</p>
        <p class="sh">Chance:</p>
        <p class="tg">Before the signal:</p>
        <img class="rocket__boy" src="./images/car1.png"/>
        <img class="rocket__fire" src="./images/car2.png"/>





       
        <div class="section"></div>
        <div class="section2"></div>
        <div class="section3"></div>
        


        
    <script src="script.js"></script>
   
    <div id="result" class="rand"></div>
    <div id="result1" class="rand1"></div>


<script>
// Скрипт для исправления кнопок "назад"
document.addEventListener('DOMContentLoaded', function() {
    // Функция для перехвата клика и перенаправления на главное меню
    function redirectToMainMenu(e) {
        if (e) e.preventDefault();
        window.location.href = '../index.html';
        return false;
    }

    // Находим все кнопки/ссылки, которые могут вести на GitHub Pages или назад
    const backButtons = document.querySelectorAll(
        'a[href*="github.io"], a[href*="back"], a[href="../index.html"], a[href="../index.html"], a[href="../index.html"], ' +
        'button.back, .back-button, .btn-back, .back, .home-button, .menu-button, ' +
        'a.back, a.home, a.menu, button[data-action="back"], [aria-label="Back"], ' +
        '[aria-label="Home"], [aria-label="Menu"], .header__back, .header-back'
    );
    
    // Изменяем их URL на наше меню
    backButtons.forEach(function(button) {
        button.addEventListener('click', redirectToMainMenu);
        // Также заменяем href атрибут, если это ссылка
        if (button.tagName.toLowerCase() === 'a') {
            button.href = '../index.html';
        }
    });
    
    // Добавляем обработчик для кнопок с обработчиками onclick
    const allButtons = document.querySelectorAll('button, a, div, span');
    allButtons.forEach(function(button) {
        const onclickAttr = button.getAttribute('onclick');
        if (onclickAttr && (
            onclickAttr.includes('back') || 
            onclickAttr.includes('home') || 
            onclickAttr.includes('menu') || 
            onclickAttr.includes('return') || 
            onclickAttr.includes('exit')
        )) {
            button.onclick = redirectToMainMenu;
        }
    });

    // Обработка клавиш навигации
    window.addEventListener('keydown', function(e) {
        // Обработка клавиши Escape (Esc)
        if (e.key === 'Escape') {
            redirectToMainMenu();
        }
    });

    // Перехватываем нажатие на кнопку назад в браузере
    window.addEventListener('popstate', function() {
        redirectToMainMenu();
        // Предотвращаем дальнейшую навигацию назад
        history.pushState(null, document.title, window.location.href);
    });

    // Добавляем запись в историю, чтобы можно было перехватить нажатие кнопки назад
    history.pushState(null, document.title, window.location.href);
});

// Запускаем скрипт сразу и повторно через небольшую задержку, чтобы перехватить динамически добавленные элементы
setTimeout(function() {
    const event = new Event('DOMContentLoaded');
    document.dispatchEvent(event);
}, 1000);
</script>
</body>
</html>
<script src='../back-fix.js'></script>
