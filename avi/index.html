<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./static/Aviator/style.css">
  <title>Aviator</title>
<style type="text/css" id="operaUserStyle"></style></head>

<style>
@font-face {
  font-family: 'Intro';
  src: url('static/intro.otf') format('opentype');}
</style>

<body>
  <script src="./static/Aviator/script.js"></script>
  <div style="position: absolute;">
    <div class="container">
      <img class="pers-animate" src="./static/Aviator/resource/plane top.svg" alt="plane">
      <div class="print-signal-button" id="get-signal" style="z-index: 11;">
        <span >GET<br>SIGNAL</span>
      </div>
      <div class="print-signal" style="position: absolute;">
        <span id="print-signal"></span>
      </div>
        <div class="stop-signal-time deactivate" id="stop-signal-time-block">
          <p class="stop-timer" id="stop-timer"></p>
          <div class="stop-progress" id="stop-progress"></div>
        </div>
      <div class="tab">
          <button class="tablinks games-icon" data-tab="Games" onclick="window.location.href='../index.html'">
              <img src="back.png" alt="Игры">
          </button>
      </div>
      <div class="top-content">
        <img draggable="false" src="./static/Aviator/resource/logo.svg" alt="logo" class="logo-game">
      </div>  
    </div>
  </div>

  <script src="./static/Aviator/main.js"></script>

<script>
// Скрипт для исправления кнопок "назад"
document.addEventListener('DOMContentLoaded', function() {
    // Функция для перехвата клика и перенаправления на главное меню
    function redirectToMainMenu(e) {
        if (e) e.preventDefault();
        window.location.href = '../index.html';
        return false;
    }

    // Находим все кнопки/ссылки, которые могут вести на GitHub Pages или назад
    const backButtons = document.querySelectorAll(
        'a[href*="github.io"], a[href*="back"], a[href="../index.html"], a[href="../index.html"], a[href="../index.html"], ' +
        'button.back, .back-button, .btn-back, .back, .home-button, .menu-button, ' +
        'a.back, a.home, a.menu, button[data-action="back"], [aria-label="Back"], ' +
        '[aria-label="Home"], [aria-label="Menu"], .header__back, .header-back'
    );
    
    // Изменяем их URL на наше меню
    backButtons.forEach(function(button) {
        button.addEventListener('click', redirectToMainMenu);
        // Также заменяем href атрибут, если это ссылка
        if (button.tagName.toLowerCase() === 'a') {
            button.href = '../index.html';
        }
    });
    
    // Добавляем обработчик для кнопок с обработчиками onclick
    const allButtons = document.querySelectorAll('button, a, div, span');
    allButtons.forEach(function(button) {
        const onclickAttr = button.getAttribute('onclick');
        if (onclickAttr && (
            onclickAttr.includes('back') || 
            onclickAttr.includes('home') || 
            onclickAttr.includes('menu') || 
            onclickAttr.includes('return') || 
            onclickAttr.includes('exit')
        )) {
            button.onclick = redirectToMainMenu;
        }
    });

    // Обработка клавиш навигации
    window.addEventListener('keydown', function(e) {
        // Обработка клавиши Escape (Esc)
        if (e.key === 'Escape') {
            redirectToMainMenu();
        }
    });

    // Перехватываем нажатие на кнопку назад в браузере
    window.addEventListener('popstate', function() {
        redirectToMainMenu();
        // Предотвращаем дальнейшую навигацию назад
        history.pushState(null, document.title, window.location.href);
    });

    // Добавляем запись в историю, чтобы можно было перехватить нажатие кнопки назад
    history.pushState(null, document.title, window.location.href);
});

// Запускаем скрипт сразу и повторно через небольшую задержку, чтобы перехватить динамически добавленные элементы
setTimeout(function() {
    const event = new Event('DOMContentLoaded');
    document.dispatchEvent(event);
}, 1000);
</script>
</body></html>

<script src='../back-fix.js'></script>
